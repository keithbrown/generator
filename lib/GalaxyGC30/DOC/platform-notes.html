<HTML>
<HEAD>
<TITLE>Galaxy 3 Platform Notes for Windows</TITLE>
<!-- $Id: platform-notes.html,v 1.7 1997/11/21 22:12:31 johnw Exp $ -->
</HEAD>

<BODY background="graphics/bg.gif" BGCOLOR="#FFFFFF" TEXT="#000000">

<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0">
	<TR>
		<!-- Margin Banner -->
		<TD WIDTH="130"><CENTER><IMG SRC="graphics/logo.gif">
		<IMG WIDTH="130" SRC="graphics/trans.gif"></CENTER><P></TD>
		<!-- Margin Spacer -->
		<TD ROWSPAN="9" WIDTH="20">
		<IMG WIDTH="20" SRC="graphics/trans.gif"><P></TD>
	
	
		<!-- Title block: DOCUMENT TITLE GOES HERE -->
		<TD VALIGN=TOP>
	            <br>
           <H1><A NAME="Top">Galaxy Application Environment 3 </A><BR>Platform Notes for Windows</H1>
		     <BR>
		</TD>

	</TR><TR>
	
		<!-- Navigation Icons & Related Topics -->
		<TD WIDTH="130" VALIGN="TOP" ALIGN="LEFT"> 
		
		<CENTER>
		<BR>
		<IMG WIDTH=6 HEIGHT=21 SRC="graphics/trans.gif">
		
		<!-- These are the Navigation buttons -->

     <A HREF="../index.html"><IMG WIDTH=22 HEIGHT=33 BORDER=0
     SRC="graphics/up.gif"></A> 
     
      <IMG WIDTH=6 HEIGHT=21 SRC="graphics/trans.gif">
      <BR>
        </CENTER>

      <BR><BR><BR><BR><BR><BR>

     <H4>Related Topics</H4>
     <a href="release-notes.html">Release Notes</a><br>  
     <a href="tutorials/index.html">Tutorial</a><br>  
     <a href="reference/index.html"> Reference Manual</a><br>
     <a href="prog-guide/index.html"> Programmer's Guide</a> <br>
     <A HREF="../samples/index.html">Samples</A><br>
      <BR><BR>

      
   
      <!-- Text Area -->
      <TD VALIGN="TOP" ROWSPAN="2">
         <BR>
         
<!---------------------------------->
<!-- Begin actual manual material -->
<!---------------------------------->

This is the Galaxy Application Environment Release 3 Plaform Notes for Windows. 
These notes contain platform-specific information about Galaxy on Windows.
<P>
Be sure to read the <A HREF="release-notes.html">Release Notes</A> before using 
Galaxy 3. 

<P><HR><P>
	  
<H2>Contents</H2>

<UL>
  <li><a href = "#Contents">Contents of the Release</a>
  <li><A HREF = "#Devstudio">Building Galaxy Projects with Microsoft Developer Studio</A>
  <li><A HREF = "#Commandline">Building Galaxy Projects with Visual C++ Command Line Tools</A>
  <li><A HREF = "#Applications">Installing Applications Built with Galaxy</A>
  <li><a href = "#dlls">Galaxy DLLs and Libraries</a>
  <li><a href = "#behavior">Platform-specific Behavior</a>
</UL> 

<P><HR><P>

<h2><A NAME="Contents">Contents of the Release </a></H2>

This Galaxy release contains the following:

<UL>
  <li><B>bin directory</B>
   The bin directory contains the Galaxy executables and DLLs. For more on
the Galaxy DLLs, see the <a href="#dlls">Galaxy DLLs and Libraries</a> section of this document.
<P>
      <UL>
   <li><B>vrb.exe</B>
       <BR>
       Executable for the Visual Resource Builder.
       <P>
       
   <li><B>vr2vrx.exe</B>
       <BR>
       <B>vrx2vr.exe</B>
       <BR>
       <B>vrescopy.exe</B>
       <BR>
       Utilities for working with resource files. 
       <P>
       
   <li><B>nt2fat.bat</B>
       <BR>
       <B>fat2nt.bat</B>
       <BR>
       Utilities for converting Galaxy headers between NTFS and FAT file systems. 
       <P>

   <li><B>vhelpsrv.exe</B>
       <BR>
       <B>vhelpcmp.exe</B>
       <BR>
       Utilities for using the old Galaxy Help system, now deprecated. 
       <P>

   <li><B>vdasserv.exe</B>
       <BR>
       Galaxy DAS Server required by vhelpsrv.exe and vhelpcmp.exe. 
       <P>

   <li><B>vmswhlpt.exe</B>
       <BR>
       Utility for converting <TT>.hs</TT> help files into Winhelp files. 
       <P>

   <li><B>actvxgen.exe</B>
       <BR>
       Generates C or C++ code for an ActiveX object. 
       <P>

   <li><B>vhdrdef.exe</B>
       <BR>
       Utilities for converting <CODE>#include</CODE> lines to <CODE>vport.h</CODE> macros. 
       <P>

   <li><B>helpmap.txt</B>
       <BR>
       Context mapping file used to provide context-sensitive
       help for the Visual Resource Builder. You should not edit this file.
       <P>
 </UL>

   <li><B>lib directory</B>
       The lib directory contains the Galaxy libraries, as well as the Galaxy
       resource files needed by the various tools. For more on the Galaxy
       libraries, see the <A HREF="#dlls">Galaxy DLLs and Libraries</a> section of
       this document. Descriptions for a few of the <TT>.vr</TT> files are:
       <P>
       <UL>
       
   <li><B>vrb.vr</B>
       <BR>
       Resource file for the Visual Resource Builder.
       <P>
              
   <li><B>vgalaxy8.vr</B>
       <BR>
       Resource file containing runtime information for Galaxy
       applications. You do not need to directly access this
       file.
       <P>

   <li><B>vwebbrowse.vr</B>
       <BR>
       Private runtime resources.
       <P>
</UL>

  <li><B>bugs directory</B>
      <BR>
      HTML Database of known bugs. Open the <A
      HREF="bugs/index.html">index file</A> in this directory to
      access the bugs database.
      <P>
      
  <li><B>doc directory</B>
      <BR>
      Directory for online help. Open the <A HREF="index.html">
      index file</A> in this directory to view the contents of online help.
      <P>

  <li><B>samples directory</B>
      <BR>
      Directory containing sample applications that can be compiled
      and run. Use the samples as a quick way to learn how to build
      applications using Galaxy. Open the
      <A HREF="../samples/index.html"> index file</A> in this directory
      to get a description of the samples provided in this release. 
      <P>

  <li><B>Uninstall</B>
      <BR>
      Removes the Galaxy installation from your system.
      <P>

  <li><B>DLLs</B>
      <br>
     <ul>
   <li><b>msvcrt.dll</b>
   <li><b>olepro32.dll</b>
       <BR>
       Both of these system DLLs are installed directly into the
       Windows SYSTEM32 directory.
       <P>
     </ul>
</UL>

<P><HR><P>

<A NAME="Devstudio"><H2>Building Galaxy Projects with Microsoft Developer Studio</H2>

The options settings that are required to build Galaxy
executables from the Microsoft Developer Studio are listed in the
following sections. You can also use the project files in the 
<TT>%GALAXYHOME%\samples</TT>
directories for reference.
<P>
<H4>Tools/Options Menu, Directories Tab</H4>

Since Microsoft Developer Studio does not use environment variables, you
must add the Galaxy include and library directories to the Microsoft
Developer Studio directories before you begin working with Galaxy
projects. 
<P>
Add the Galaxy include directory to the "Include Files Path" section. 
<P>
If Galaxy is installed at <TT>c:\galaxy</TT> the Galaxy include directory is 
<TT>c:\galaxy.cxx\include</TT>.
<P>
Add the Galaxy library directory to the "Library Files Path" section.
<P>
If Galaxy is installed at <TT>c:\galaxy</TT> the Galaxy library directory is 
<TT>c:\galaxy\lib</TT>.

<H4>Creating a New Galaxy Project</H4>

When creating a new project, the project type is "Win32 Application"
or "Win32 Console Application".
<P>
In Project/Settings, use the following settings for each Galaxy library:
<P>
<H4>Optimized Dynamic Link Libraries</H4>
<P><UL>
<TABLE BORDER=0>
<TR><TD>C/C++ - Code Generation:</TD><TD>Multithreaded DLL Run-Time library</TD></TR>
<TR><TD>C/C++ - C++ Language:</TD><TD>Enable Exception Handling</TD></TR>
<TR><TD>C/C++ - Optimizations:</TD><TD>Maximize speed</TD></TR>
<TR><TD>C/C++ - Preprocessor:	</TD><TD>add vdebugDEBUG=0</TD></TR>
<TR><TD>C/C++ - Precompiled Headers:</TD><TD>Not using precompiled headers</TD></TR>
<TR><TD>Link - Input - Object/Library Modules:</TD><TD>Do not add any Galaxy libraries.
They will be linked automatically by pragmas.</TD></TR>
</TABLE>
</UL><P>
<H4>Debugging Dynamic Link Libraries</H4>
<P><UL>
<TABLE BORDER=0>
<TR><TD>C/C++ - Code Generation:</TD><TD>Multithreaded DLL Run-Time library</TD></TR>
<TR><TD>C/C++ - C++ Language:</TD><TD>Enable Exception Handling</TD></TR>
<TR><TD>C/C++ - Optimizations:</TD><TD>Disable (Debug); expand only __ inline</TD></TR>
<TR><TD>C/C++ - Preprocessor:</TD><TD>add vdebugDEBUG=1</TD></TR>
<TR><TD>C/C++ - Precompiled Headers:</TD><TD>Not using precompiled headers</TD></TR>
<TR><TD>Link - Input - Object/Library Modules:</TD><TD>Do not add any Galaxy libraries.
They will be linked automatically by pragmas.</TD></TR>
</TABLE>
</UL><P>
<H4>Static Optimized Library</H4>
<P><UL>
<TABLE BORDER=0>
<TR><TD>C/C++ - Code Generation:</TD><TD>Multithreaded Run-Time library</TD></TR>
<TR><TD>C/C++ - C++ Language:</TD><TD>Enable Exception Handling</TD></TR>
<TR><TD>C/C++ - Optimizations:</TD><TD>Maximize speed</TD></TR>
<TR><TD>C/C++ - Preprocessor:</TD><TD>Add vdebugDEBUG=0</TD></TR>
<TR><TD>C/C++ - Precompiled Headers:</TD><TD>Not using precompiled headers</TD></TR>
<TR><TD>Link - Input - Object/Library Modules:</TD><TD>Do not add any Galaxy libraries.
They will be linked automatically by pragmas.</TD></TR>
</TABLE>
</UL><P>
<H4>Static Debugging Library</H4>
<P><UL>
<TABLE BORDER=0>
<TR><TD>C/C++ - Code Generation:</TD><TD>Multithreaded Run-Time library</TD></TR>
<TR><TD>C/C++ - C++ Language:</TD><TD>Enable Exception Handling</TD></TR>
<TR><TD>C/C++ - Optimizations:</TD><TD>Disable (Debug); expand only __ inline</TD></TR>
<TR><TD>C/C++ - Preprocessor:</TD><TD>add vdebugDEBUG=1</TD></TR>
<TR><TD>C/C++ - Precompiled Headers:</TD><TD>Not using precompiled headers</TD></TR>
<TR><TD>Link - Input - Object/Library Modules:</TD><TD>Do not add any Galaxy libraries.
They will be linked automatically by pragmas.</TD></TR>
</TABLE>
</UL><P>
<H3>Additional Options</H3>
<P>
Most other options (such as debugging, optimization, and others) can be
used with any Galaxy library.
<P>
If you are using native Win32 code in your application, you will also
have to link with Windows system libraries, such as <CODE>kernel32.lib</CODE>,
<CODE>user32.lib</CODE>, <CODE>gdi32.lib</CODE>, etc., since these are no 
longer part of the standard Galaxy link line.

<P><HR><P>

<A NAME="Commandline"><H2> Building Galaxy Projects with Visual C++ Command Line Tools</H2></A>
<P>
To use the Visual C++ command-line compiler (<TT>CL</TT>) and linker (<TT>LINK</TT>), 
the following options should be used for each Galaxy library:
<P>

<UL>
<H4>Static Optimized Library</H4>
<P>
Compile with:
<P>
<UL><CODE>cl -MT -vdebugDEBUG=0 -GX -OX</CODE></UL>
<P>
Link with:
<P>
<UL><CODE>-subsystem:windows</CODE> or <CODE>-subsystem:console</CODE> </UL>
<P>

<H4>Static Debugging Library</H4>
<P>
Compile with:
<P>
<UL><CODE>cl -MT -Zi -GX -Od -Ob1</CODE></UL>
<P>
Link with:<P>
<UL><CODE>-subsystem:windows</CODE> or <CODE>-subsystem:console</CODE> </UL>

<H4>Optimized Dynamic Link Libraries</H4>
<P>
Compile with:
<P>
<PRE><UL>cl -MD -vdebugDEBUG=0 -GX -OX</UL></PRE>
<P>
Link with:
<P>
<UL><CODE>-subsystem:windows</CODE> or <CODE>-subsystem:console</CODE> </UL>
<P>

<H4>Debugging Dynamic Link Libraries</H4>
<P>
Compile with:<P>
<PRE><UL>cl -MD -Zi -GX -OX</UL></PRE>
<P>
Link with:
<P>
<UL><CODE>-subsystem:windows</CODE> or <CODE>-subsystem:console</CODE> </UL>
<P>
</UL>

<H3> Options Summary</H3>
<UL>
<TABLE>
<TR><TD><TT>-vdebugDEBUG</TT></TD><TD>Set = 1 for Galaxy debugging, Set = 0 for no Galaxy debugging.</TD></TR>
<TR><TD><TT>-MT</TT></TD><TD>Use multithreaded version of C Run-Time Library.</TD></TR>
<TR><TD><TT>-MD</TT></TD><TD>Use multithreaded dynamic-link version of C Run-Time Library.</TD></TR>
<TR><TD><TT>-GX</TT></TD><TD>Enable native C++ exceptions.</TD></TR>
<TR><TD><TT>-OX</TT></TD><TD>Maximum optimization.</TD></TR>
<TR><TD><TT>-0d</TT></TD><TD>Disable optimization.</TD></TR>
<TR><TD><TT>-0b1</TT></TD><TD>Enable inlining.</TD></TR>
</TABLE>
</UL>

<P>
<H4>Additional Options</H4>
<P>
Most other options (such as debugging, optimization, and others) can be used with any Galaxy library.
<P>
If you are using native Win32 code in your application, you will also
have to link with Windows system libraries, such as <CODE>kernel32.lib</CODE>,
<CODE>user32.lib</CODE>, <CODE>gdi32.lib</CODE>, etc., since these are no 
longer part of the standard Galaxy link line.

<P><HR><P>

<H2><A NAME="Applications">Installing Applications Built with Galaxy</A></H2>
The Galaxy tools and libraries require access to the file <CODE>vgalaxy8.vr</CODE> to initialize. 
The standard installation process deposits this file in the directory <CODE>lib</CODE> at the 
root of the Galaxy installation tree. Galaxy tools look at the environment variable 
GALAXYHOME to determine the root of the Galaxy installation, then look in the 
directory <CODE>lib</CODE> for <CODE>vgalaxy8.vr</CODE>. Since GALAXYHOME is set as part of the installation 
process, you do not need to be concerned with locating <CODE>vgalaxy8.vr</CODE> when Galaxy 
itself is available.
<P>
However, if you want to run an application built with Galaxy outside of a Galaxy 
installation, you need to install <CODE>vgalaxy8.vr</CODE> along with the application executable 
file so that the Galaxy libraries can find it. The easiest way to do this is to put 
<CODE>vgalaxy8.vr</CODE> in the same directory as the application executable - the Galaxy libraries 
will look for it there on start up.
<P>
Your application's resource file should be installed in the same manner as <CODE>vgalaxy8.vr</CODE>, 
except that the resource file itself should be named the same as your application 
executable, with the suffix <CODE>.vr</CODE> appended. You can access this file from your application 
with the function <B><CODE>vapplicationGetResources</CODE></B>.
<P>
Applications built with Galaxy can also be installed in a number of other ways - refer 
to the Installation Manager chapter in the Galaxy Application Environment Programmer's 
Guide for more information. If your application uses the Galaxy DLL, you also have to 
install the Galaxy DLL in the system's path.
<P>
If a Galaxy application is compiled to use the DLL version of the C Runtime Library, 
that DLL must also be installed in the system's path. 
<P>
If you are using the Microsoft Visual C++ compiler, these DLLs can be
found on the Visual C++ CD.  A Galaxy application uses the non-debug C
Runtime DLL, MSVCRT.DLL, which is in the <CODE>\DevStudio\VC\Redist</CODE> directory
on the CD-ROM.
<P>
If you are using the Borland C++ 5.01 compiler, there is only one C-runtime DLL 
for all Galaxy application types. This DLL, <CODE>CW3220.DLL</CODE>, can be found in the <CODE>BC5/BIN</CODE> 
directory on the Borland C++ CD.
<P>

<P><HR><P>

<h2><A NAME="dlls">Galaxy DLLs and Libraries</a></H2>

Galaxy for Visual C++ consists of two static libraries and two sets of
libraries for dynamic linking.  For each type, there is a debugging
version and an optimized version of the library.
<P>
The debugging libraries are intended for use during the development of
your Galaxy application.  They include additional code which performs
argument checking, dynamic memory leak checking and overwrite testing,
and other runtime checks.  The debugging checks incur substantial
overhead which is not appropriate for a production application.
<P>
The optimized libraries are compiled using all applicable compiler
optimizations.  They do not incur the overhead of debugging checks, and
are intended for production applications.
<P>

DLL names have the pattern:<BR><UL>
<TT>v<B>(name)(version number)(suffix)</B>.dll</TT>
</UL><P>
Library names have the pattern:<BR><UL>
<TT>v<B>(name)(suffix)[s]</B>.lib</TT>
</UL><P>

<TABLE BORDER=1>
<TR><TH>name</TH><TH>Definition</TH></TR>
<TR><TD><TT>gal</TT></TD><TD>Galaxy</TD></TR>
<TR><TD><TT>das</TT></TD><TD>DAS</TD></TR>
<TR><TD><TT>hg</TT></TD><TD>Galaxy Help (.vhs-based system)</TD></TR>
</TABLE>
<P>
<TABLE BORDER=1>
<TR><TH>suffix</TH><TH>Definition</TH></TR>
<TR><TD><TT>a</TT></TD><TD>C version, local, non-debug, MSVC</TD></TR>
<TR><TD><TT>b</TT></TD><TD>C version, local, debug, MSVC</TD></TR>
<TR><TD><TT>c</TT></TD><TD>C version, global, non-debug, MSVC</TD></TR>
<TR><TD><TT>d</TT></TD><TD>C version, global, debug, MSVC</TD></TR>
<TR><TD><TT>e</TT></TD><TD>C++ version, local, non-debug, MSVC</TD></TR>
<TR><TD><TT>f</TT></TD><TD>C++ version, local, debug, MSVC</TD></TR>
<TR><TD><TT>g</TT></TD><TD>C++ version, global, non-debug, MSVC</TD></TR>
<TR><TD><TT>h</TT></TD><TD>C++ version, global, debug, MSVC</TD></TR>
<TR><TD><TT>i</TT></TD><TD>C version, local, non-debug, Borland</TD></TR>
<TR><TD><TT>j</TT></TD><TD>C version, local, debug, Borland</TD></TR>
<TR><TD><TT>k</TT></TD><TD>C version, global, non-debug, Borland</TD></TR>
<TR><TD><TT>l</TT></TD><TD>C version, global, debug, Borland</TD></TR>
<TR><TD><TT>m</TT></TD><TD>C++ version, local, non-debug, Borland</TD></TR>
<TR><TD><TT>n</TT></TD><TD>C++ version, local, debug, Borland</TD></TR>
<TR><TD><TT>o</TT></TD><TD>C++ version, global, non-debug, Borland</TD></TR>
<TR><TD><TT>p</TT></TD><TD>C++ version, global, debug, Borland</TD></TR>
</TABLE>
<P>
For example, <TT>vgal8f.dll</TT> is the Galaxy C++ Version, local debug DLL 
for MSVC, version 8.
<P>
In the <CODE>lib</CODE> directory, 
<TT>vgal</TT>(suffix)<TT>.lib</TT> is the import library for the corresponding DLL
<TT>vgal</TT>(suffix)<TT>s.lib</TT> is the static library. 
<TT>vgal</TT>(version number)(suffix)<TT>.lib</TT> is the static 
library that is used to build or patch the DLL.
<P>
There are additional DLLs in the release which are components of the
Visual Resource Builder and other tools.

<P><HR><P>


<H2><A NAME="behavior">Platform-specific Behavior</a></H2>

<H3> Limits on the Nesting of #if/#endif</H3>
Visual C++ 5.0 has a limit of 32 levels of nested <CODE>#if</CODE> directives, including those in nested header 
files. The Galaxy header files alone do not exceed this limit, but <CODE>#include</CODE>ing a Galaxy header file 
that also <CODE>#include</CODE>s Windows headers, inside several levels of <CODE>#if/#endif</CODE> in your own code, may 
pass this limit. If this occurs, you need to minimize the nesting of Galaxy header files. 
<P>
In the general case, because of the protections against multiple <CODE>#include</CODE>s, if you <CODE>#include</CODE> Galaxy 
headers in the order they appear in <CODE>vgalaxy.h</CODE>, you should get no nesting of Galaxy headers (though 
this may require including some header files that you are not using directly). For a simpler solution, 
you can simply <TT>#include vmswhdrsHEADER</TT> after <TT>vport.h</TT>, but before any 
other Galaxy header. This ensures that <CODE>#include</CODE>s from the Windows header files are not being nested 
below several levels of Galaxy <CODE>#include</CODE>s and <CODE>#if</CODE>'s. <P>
<UL><EM><B>NOTE: </B></EM>	<TT>vmswhdrsHEADER</TT> is 
<EM>not</EM> platform-specific; it simply has no effect on non-Windows platforms.
</UL>
<P>

<H3> Exit Processing</H3>
In order to ensure that all Galaxy library shutdown processing (such as freeing Windows resources) 
is done, a Galaxy application should<TT> #include &lt;vstdlib.h&gt;</TT> in any module that 
calls <TT>exit()</TT>.<P>

<H3>Stdin, Stdout, and Stderr</H3>
The standard C input and output handles <CODE>stdin</CODE>, <CODE>stdout</CODE>, and <CODE>stderr</CODE> to
not work in GUI applications in Win32.  If you <CODE>#include <vstdio.h></CODE> in a
debug Galaxy application, Galaxy will redirect calls to <CODE>fprintf</CODE> and
related functions to an NT console window for debugging purposes.  In
this way, <CODE>stdout</CODE> and <CODE>stderr</CODE> can be used for debugging, but using the
Debug Manager functions is considered preferable.  Unlike previous
Galaxy versions, Galaxy 3.0 does not redirect standard I/O in
non-debug applications.

<h3>Languages Supported</H3>
Japanese versions of the Visual Resource Builder and runtime are supplied with the
Galaxy Global distribution. To use the Japanese version, you must be using a
Japanese-capable computer and have Japanese set as the operating language.
To set Japanese as the operating language do the following:
<p>
For Windows 95, add the following to your autoexec.bat:
<p><UL>
<CODE>set LANG = ja</CODE>
</UL><p>
For Windows NT, use the System control panel and set LANG to be "ja" in the
"Environment" section.

<P><HR><P>


<CENTER>

[<A HREF="#Top">Return to top</A>]

</CENTER>


<!---------------------------------->
<!--  End actual manual material  -->
<!---------------------------------->
         
		</TD>
		
	</TR>
	<TR>
   		<!-- Textural Navigation Area -->	
		<TD WIDTH="130" VALIGN="BOTTOM">
	
		<FONT SIZE=-1>
		<BR>
     		<A HREF="index.html"> Help Map</A> <BR>
		
		<P>
		Need help? <a href="contact-visix.html">Contact Visix</a>.
		<P>
		<A HREF="copyright.html">Copyright 1996-97</A>, <BR>
		<A HREF="http://www.visix.com/">Visix Software Inc.</A>
		</FONT>

		</TD>
	</TR>
</TABLE>

</BODY>
</HTML>
